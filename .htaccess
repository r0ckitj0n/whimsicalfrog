<Files "api/sync_db.php">
  Require all granted
</Files>

<IfModule mod_rewrite.c>
  RewriteEngine On
  
  # Allow direct access to PHP files in the /api/ directory
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^api/.*\.php$ - [L]
  
  # All other requests go to index.php
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php [L]
</IfModule>