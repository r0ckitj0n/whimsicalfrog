# Root .htaccess for clean URL routing via router.php and to avoid MultiViews interfering

# Disable MultiViews so /shop does not get rewritten to shop.php implicitly
Options -MultiViews

# Enable RewriteEngine
RewriteEngine On
RewriteBase /

# Map stale app.js-* requests to the current bundle directly (internal rewrite, no redirect)
RewriteRule ^dist/assets/js/app\.js-[A-Za-z0-9_\-]+\.js$ dist/assets/js/app.js-BbFnSAYk.js [L]

# Allow direct access to existing files and directories
# Only allow direct access to existing files. Route other requests (including
# missing files under existing directories) through router.php so it can
# implement graceful fallbacks for built assets.
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Route everything else through router.php (front controller)
# Exclude nothing special here; router.php will itself allow static files
RewriteRule ^ router.php [L,QSA]
