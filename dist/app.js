(function(){"use strict";var R,B;function M(o,e=null){const t=o.dataset.errorHandled||"none",n=o.src;if(t!=="final"){if(e){if(n.includes(`${e}A.webp`)){o.src=`images/items/${e}A.png`,o.dataset.errorHandled="png-tried";return}if(n.includes(`${e}A.png`)){g(o);return}}g(o)}}function L(o){o.dataset.errorHandled||g(o)}function F(o,e=null){o.onerror=()=>{e?M(o,e):L(o)}}function g(o){o.src="images/items/placeholder.webp",o.dataset.errorHandled="final",o.onerror=null}console.log("[ImageErrorHandler] ES module loaded");class m{static async request(e,t={}){const n={headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"},a={...n,...t,headers:{...n.headers,...t.headers||{}}},s=await fetch(e,a);if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const r=await s.json();if(r&&r.success===!1)throw new Error(r.error||"API request failed");return r}static get(e,t={}){!e.startsWith("http")&&!e.startsWith("/api/")&&(e=e.startsWith("/")?`/api${e}`:`/api/${e}`);const n=new URL(e,window.location.origin);return Object.keys(t).forEach(a=>{t[a]!==null&&t[a]!==void 0&&n.searchParams.append(a,t[a])}),this.request(n.toString(),{method:"GET"})}static post(e,t={},n={}){return this.request(e,{method:"POST",body:JSON.stringify(t),...n})}static put(e,t={},n={}){return this.request(e,{method:"PUT",body:JSON.stringify(t),...n})}static delete(e,t={}){return this.request(e,{method:"DELETE",...t})}static upload(e,t,n={}){return this.request(e,{method:"POST",body:t,headers:{},...n})}}const u=(o,e)=>m.get(o,e),S=(o,e,t)=>m.post(o,e,t),k=(o,e,t)=>m.put(o,e,t),C=(o,e)=>m.delete(o,e),H=(o,e,t)=>m.upload(o,e,t);if(((R=window==null?void 0:window.location)==null?void 0:R.hostname)==="localhost"||(B=window==null?void 0:window.location)!=null&&B.hostname.includes("dev")){const o=window.fetch;window.fetch=function(...e){return typeof e[0]=="string"&&e[0].includes("/api/")&&(console.warn("‚ö†Ô∏è  Consider using ApiClient instead of direct fetch for API calls:",e[0]),console.warn(`Example: apiGet("${e[0]}") or apiPost("${e[0]}", data)`)),o.apply(this,e)}}const q={apiGet:u,apiPost:S,apiPut:k,apiDelete:C,uploadFile:H,DOMUtils:class{static setContent(e,t,n=!1){e&&(n?(e.innerHTML='<div class="wf-loading">Loading...</div>',requestAnimationFrame(()=>{e.innerHTML=t})):e.innerHTML=t)}static showToast(e,t="info",n=3e3){const a=document.createElement("div");a.className=`wf-toast wf-toast-${t}`,a.textContent=e,document.body.appendChild(a),setTimeout(()=>a.remove(),n)}}};typeof window<"u"&&(window.Utils=q);const x={openEditModal:(o,e)=>{var t;return(t=window.openEditModal)==null?void 0:t.call(window,e.type,e.id)},openDeleteModal:(o,e)=>{var t;return(t=window.openDeleteModal)==null?void 0:t.call(window,e.type,e.id,e.name)},performAction:(o,e)=>{var t;return(t=window.performAction)==null?void 0:t.call(window,e.action)},runCommand:(o,e)=>{var t;return(t=window.runCommand)==null?void 0:t.call(window,e.command)},loadRoomConfig:()=>{var o;return(o=window.loadRoomConfig)==null?void 0:o.call(window)},resetForm:()=>{var o;return(o=window.resetForm)==null?void 0:o.call(window)}};function N(){if(document.body.dataset.wfCentralListenersAttached)return;document.body.dataset.wfCentralListenersAttached="true";const o=t=>{try{return t.dataset.params?JSON.parse(t.dataset.params):{}}catch{return{}}},e=(t,n,a)=>{document.body.addEventListener(t,s=>{const r=s.target.closest(`[${n}]`);if(!r)return;t==="click"&&s.preventDefault();const l=o(r),c=x[r.dataset[a]];c==null||c(r,l,s)})};e("click","data-action","action"),e("change","data-change-action","changeAction"),e("focusin","data-focus-action","focusAction"),e("focusout","data-blur-action","blurAction"),e("mouseover","data-mouseover-action","mouseoverAction"),e("mouseout","data-mouseout-action","mouseoutAction")}document.addEventListener("DOMContentLoaded",N),typeof window<"u"&&(window.centralFunctions=x);class d{static setContent(e,t,n=!1){e&&(n?(e.innerHTML='<div class="text-center text-gray-500 py-4">Loading...</div>',setTimeout(()=>{e.innerHTML=t},100)):e.innerHTML=t)}static createLoadingSpinner(e="Loading..."){return`
            <div class="flex items-center justify-center py-4">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mr-3"></div>
                <span class="text-gray-600">${e}</span>
            </div>
        `}static createErrorMessage(e){return`
            <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                    </svg>
                    ${e}
                </div>
            </div>
        `}static createSuccessMessage(e){return`
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 text-green-700">
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                    </svg>
                    ${e}
                </div>
            </div>
        `}static showToast(e,t="info",n=3e3){const a="toast-"+Date.now(),s={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"},r=document.createElement("div");r.id=a,r.className=`fixed top-4 right-4 ${s[t]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300 translate-x-full`,r.textContent=e,document.body.appendChild(r),setTimeout(()=>{r.classList.remove("translate-x-full")},100),setTimeout(()=>{r.classList.add("translate-x-full"),setTimeout(()=>{var l;(l=document.getElementById(a))==null||l.remove()},300)},n)}static debounce(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>e(...s),t)}}static formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static async confirm(e,t="Confirm"){return new Promise(n=>{const a=document.createElement("div");a.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",a.innerHTML=`
                <div class="bg-white rounded-lg p-6 max-w-md mx-4">
                    <h3 class="text-lg font-semibold mb-4">${d.escapeHtml(t)}</h3>
                    <p class="text-gray-600 mb-6">${d.escapeHtml(e)}</p>
                    <div class="flex justify-end space-x-3">
                        <button class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded" data-action="cancel">Cancel</button>
                        <button class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded" data-action="confirm">Confirm</button>
                    </div>
                </div>
            `,document.body.appendChild(a),a.addEventListener("click",s=>{s.target.dataset.action==="confirm"?(a.remove(),n(!0)):(s.target.dataset.action==="cancel"||s.target===a)&&(a.remove(),n(!1))})})}}typeof window<"u"&&(window.DOMUtils=d,window.debounce=d.debounce,window.formatCurrency=d.formatCurrency,window.escapeHtml=d.escapeHtml,window.showToast=d.showToast,window.confirmDialog=d.confirm);async function G(){try{const o=await u("/api/get_room_data.php");if(o.success){const e={room_main:"room_main",shop:"room_main",cart:"room_main",login:"room_main",admin:"room_main"};return o.data.roomDoors.forEach(t=>{const n=`room${t.room_number}`;e[n]=n}),e}}catch(o){console.warn("[DynamicBackground] Failed to generate page-room map:",o)}return{room_main:"room_main",shop:"room_main",cart:"room_main",login:"room_main",admin:"room_main"}}async function w(){try{const e=new URLSearchParams(window.location.search).get("page")||"landing",n=(await G())[e]||"landing",a=await u(`/api/get_background.php?room_type=${n}`);if(!a.success||!a.background)return;const{image_filename:s,webp_filename:r}=a.background,c=document.documentElement.classList.contains("webp")&&r?r:s;let E=`images/backgrounds/${c}`;!E.includes("/backgrounds/")&&!c.startsWith("backgrounds/")&&(E=`images/${c}`);let f=document.querySelector(".fullscreen-container")||document.getElementById("mainContent");f||(f=document.body),f.style.setProperty("--dynamic-bg-url",`url('${E}')`),f.classList.add("bg-container","mode-fullscreen","dynamic-bg-loaded"),document.body.classList.add("dynamic-bg-active")}catch(o){console.error("[DynamicBackground] Error loading background:",o)}}document.readyState!=="loading"?w():document.addEventListener("DOMContentLoaded",w);class I{constructor(){this._target=document.createElement("span")}on(e,t){this._target.addEventListener(e,t)}off(e,t){this._target.removeEventListener(e,t)}emit(e,t=null){this._target.dispatchEvent(new CustomEvent(e,{detail:t}))}}const $=new I;typeof window<"u"&&(window.EventBus=I,window.eventBus=$);class U{constructor(){this.overlay=null,this.content=null,this.isLoading=!1,this.currentRoomNumber=null,this.roomCache=new Map}init(){this.createModalStructure(),this.setupEventListeners(),this.preloadRoomContent(),console.log("[RoomModalManager] initialised")}createModalStructure(){if(document.getElementById("roomModalOverlay")){this.overlay=document.getElementById("roomModalOverlay"),this.content=this.overlay.querySelector(".room-modal-container");return}this.overlay=document.createElement("div"),this.overlay.id="roomModalOverlay",this.overlay.className="room-modal-overlay",this.content=document.createElement("div"),this.content.className="room-modal-container";const e=document.createElement("div");e.className="room-modal-header";const t=document.createElement("div");t.className="back-button-container";const n=document.createElement("button");n.className="room-modal-button",n.textContent="‚Üê Back",n.onclick=()=>this.hide(),t.appendChild(n);const a=document.createElement("div");a.className="room-title-overlay",a.id="roomTitleOverlay";const s=document.createElement("h1");s.id="roomTitle",s.textContent="Loading‚Ä¶";const r=document.createElement("div");r.className="room-description",r.id="roomDescription",a.append(s,r),e.append(t,a);const l=document.createElement("div");l.id="roomModalLoading",l.className="room-modal-loading",l.innerHTML='<div class="room-modal-spinner"></div><p class="room-modal-loading-text">Loading room‚Ä¶</p>';const c=document.createElement("iframe");c.id="roomModalFrame",c.className="room-modal-frame",c.setAttribute("sandbox","allow-scripts allow-same-origin"),this.content.append(e,l,c),this.overlay.appendChild(this.content),document.body.appendChild(this.overlay)}setupEventListeners(){document.body.addEventListener("click",e=>{const t=e.target.closest("[data-room]");t&&(e.preventDefault(),this.show(t.dataset.room))}),this.overlay.addEventListener("click",e=>{e.target===this.overlay&&this.hide()})}show(e){this.isLoading||(this.currentRoomNumber=e,this.isLoading=!0,this.overlay.style.display="flex",document.body.classList.add("modal-open","room-modal-open"),this.loadRoom(e),setTimeout(()=>{this.overlay.classList.add("show"),this.isLoading=!1},10))}hide(){this.overlay.classList.remove("show"),document.body.classList.remove("modal-open","room-modal-open"),setTimeout(()=>{const e=document.getElementById("roomModalFrame");e&&(e.src="about:blank"),this.overlay.style.display="none",this.currentRoomNumber=null},250)}async loadRoom(e){const t=document.getElementById("roomModalLoading"),n=document.getElementById("roomModalFrame"),a=document.getElementById("roomTitle"),s=document.getElementById("roomDescription");t.style.display="flex",n.style.opacity="0",n.src="about:blank";try{const r=await this.getRoomData(e);if(!r)throw new Error("Missing room data");a.textContent=r.metadata.room_name||"Room",s.textContent=r.metadata.room_description||"",n.srcdoc=r.content}catch(r){console.error(`[RoomModalManager] error loading room ${e}:`,r),a.textContent="Error",s.textContent="Could not load content.",t.style.display="none";return}n.onload=()=>{t.style.display="none",n.style.opacity="1",$.emit("roomModalLoaded",{roomNumber:e})}}async getRoomData(e){return this.roomCache.has(e)?this.roomCache.get(e):this.preloadSingleRoom(e)}async preloadRoomContent(){try{const e=await u("/api/get_room_data.php");if(!e.success||!Array.isArray(e.data.productRooms))return;const t=e.data.productRooms.map(n=>this.preloadSingleRoom(n.room_number));await Promise.all(t)}catch(e){console.warn("[RoomModalManager] preload failed:",e)}}async preloadSingleRoom(e){if(this.roomCache.has(e))return this.roomCache.get(e);try{const t=await u(`/api/load_room_content.php?room_number=${e}&modal=1`);if(t.success)return this.roomCache.set(e,t),t}catch(t){console.warn(`[RoomModalManager] failed to preload room ${e}:`,t)}return null}}function j(){const o=new U;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>o.init()):o.init(),window.roomModalManager=o,window.WhimsicalFrog&&typeof window.WhimsicalFrog.addModule=="function"&&window.WhimsicalFrog.ready(e=>e.addModule("RoomModalManager",o))}j();function y(o){if(o.dataset.product)try{return JSON.parse(o.dataset.product)}catch(t){console.warn("[eventManager] invalid JSON in data-product",t)}if(o.dataset.sku)return{sku:o.dataset.sku,name:o.dataset.name||"",price:parseFloat(o.dataset.price||o.dataset.cost||"0"),description:o.dataset.description||"",stock:parseInt(o.dataset.stock||"0",10),category:o.dataset.category||""};const e=o.getAttribute("onmouseenter");if(e){const t=e.match(/showGlobalPopup\(this,\s*(.+)\)/);if(t)try{const n=t[1].replace(/&quot;/g,'"').replace(/&#039;/g,"'");return JSON.parse(n)}catch(n){console.warn("[eventManager] Failed to parse inline JSON",n)}}return null}function T(){document.body.hasAttribute("data-wf-room-delegated-listeners")||(document.body.setAttribute("data-wf-room-delegated-listeners","true"),document.addEventListener("mouseover",o=>{const e=o.target.closest(".item-icon, .room-product-icon");if(!e)return;const t=y(e),n=window.showGlobalPopup||parent&&parent.showGlobalPopup;typeof n=="function"&&t&&n(e,t)}),document.addEventListener("mouseout",o=>{if(!o.target.closest(".item-icon, .room-product-icon"))return;const t=window.hideGlobalPopup||parent&&parent.hideGlobalPopup;typeof t=="function"&&t()}),document.addEventListener("click",o=>{const e=o.target.closest(".item-icon, .room-product-icon");if(!e)return;o.preventDefault();const t=y(e),n=parent&&parent.showGlobalItemModal||window.showGlobalItemModal||window.showItemDetailsModal||window.showItemDetails||parent&&(parent.showItemDetailsModal||parent.showItemDetails);typeof n=="function"&&t&&n(t.sku,t)}))}function W(){document.querySelectorAll(".item-icon, .room-product-icon").forEach(e=>{e.classList.add("clickable-icon");const t=y(e);t&&(e.addEventListener("mouseenter",()=>{const n=window.showGlobalPopup||parent&&parent.showGlobalPopup;typeof n=="function"&&n(e,t)}),e.addEventListener("mouseleave",()=>{const n=window.hideGlobalPopup||parent&&parent.hideGlobalPopup;typeof n=="function"&&n()}),e.addEventListener("click",n=>{n.preventDefault();const a=parent&&parent.showGlobalItemModal||window.showGlobalItemModal||window.showItemDetailsModal||window.showItemDetails||parent&&(parent.showItemDetailsModal||parent.showItemDetails);typeof a=="function"&&a(t.sku,t)}))})}T(),window.attachDelegatedItemEvents=T,window.setupPopupEventsAfterPositioning=W;const D="whimsical_frog_cart",i={items:[],total:0,count:0,notifications:!0};function h(){try{const o={items:i.items,total:i.total,count:i.count,t:Date.now()};localStorage.setItem(D,JSON.stringify(o))}catch(o){console.error("[Cart] Failed to save cart:",o)}}function p(){i.total=i.items.reduce((o,e)=>o+e.price*e.quantity,0),i.count=i.items.reduce((o,e)=>o+e.quantity,0)}function P(o,e,t="",n=5e3){const a=window.wfNotifications||{},s=typeof a[o]=="function"?a[o]:window[`show${o.charAt(0).toUpperCase()+o.slice(1)}`];typeof s=="function"&&s(e,{title:t,duration:n})}const v={load(){try{const o=JSON.parse(localStorage.getItem(D)||"{}");Array.isArray(o.items)?i.items=o.items:i.items=[],p()}catch{i.items=[]}},save:h,add(o,e=1){const t=i.items.find(n=>n.sku===o.sku);t?t.quantity+=e:i.items.push({...o,quantity:e}),p(),h(),P("success",`Added ${o.name||o.sku} (x${e})`,"‚úÖ Added to Cart")},remove(o){const e=i.items.findIndex(t=>t.sku===o);if(e!==-1){const[t]=i.items.splice(e,1);p(),h(),P("info",`${t.name||o} removed`,"Cart")}},updateQuantity(o,e){if(e<=0)return this.remove(o);const t=i.items.find(n=>n.sku===o);t&&(t.quantity=e,p(),h())},clear(){i.items=[],p(),h()},getItems:()=>[...i.items],getTotal:()=>i.total,getCount:()=>i.count,getState:()=>({...i})};v.load(),J();function J(){window.cart||(window.cart=v)}async function b(o){try{const t=await(await u(`sales.php?action=get_active_sales&item_sku=${o}`)).json();if(t.success&&t.sale)return{isOnSale:!0,discountPercentage:parseFloat(t.sale.discount_percentage)}}catch(e){console.warn("[SalesChecker] error checking sale",o,e)}return{isOnSale:!1}}const _=(o,e)=>o*(1-e/100);async function z(o,e,t=null){if(!o||!e)return;const n=await b(o.sku),a=parseFloat(o.retailPrice||o.price);if(n.isOnSale&&n.discountPercentage>0){const s=_(a,n.discountPercentage),r=`<span class="u-text-decoration-line-through u-color-999 u-font-size-0-9em">$${a.toFixed(2)}</span>
      <span class="u-color-dc2626 u-font-weight-bold u-margin-left-5px">$${s.toFixed(2)}</span>
      <span class="u-color-dc2626 u-font-size-0-8em u-margin-left-5px">(${Math.round(n.discountPercentage)}% off)</span>`;e.innerHTML=r,t&&(t.innerHTML=r),Object.assign(o,{salePrice:s,originalPrice:a,isOnSale:!0,discountPercentage:n.discountPercentage})}else e.textContent=`$${a.toFixed(2)}`,t&&(t.textContent=`$${a.toFixed(2)}`),o.isOnSale=!1}function A(o,e){if(!o)return;const t=parseFloat(e);if(isNaN(t)||t<=0)return;const n=o.querySelector(".sale-badge");n&&n.remove();const a=document.createElement("div");a.className="sale-badge",a.innerHTML=`<span class="sale-text">SALE</span><span class="sale-percentage">${Math.round(t)}% OFF</span>`,o.appendChild(a)}window.location.search.includes("page=shop")&&document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-sku]").forEach(async o=>{const e=o.getAttribute("data-sku"),t=await b(e);t.isOnSale&&A(o,t.discountPercentage)})}),Object.assign(window,{checkItemSale:b,calculateSalePrice:_,checkAndDisplaySalePrice:z,addSaleBadgeToCard:A});class O{constructor(){this.modal=null,this.searchInput=null,this.isSearching=!1,this.currentSearchTerm="",this.currentResults=[],this.init()}init(){this.createModalHTML(),this.modal=document.getElementById("searchModal"),this.searchInput=document.getElementById("headerSearchInput"),this.bindEvents()}createModalHTML(){if(document.getElementById("searchModal"))return;document.body.insertAdjacentHTML("beforeend",`<div id="searchModal" class="wf-search-modal hidden">
        <div class="search-modal-content">
          <div class="search-modal-header">
            <h2 class="search-modal-title">Search Results</h2>
            <button class="search-modal-close" type="button">&times;</button>
          </div>
          <div class="search-modal-body" id="searchModalBody"></div>
        </div>
      </div>`)}bindEvents(){var t;if(this.modal.querySelector(".search-modal-close").addEventListener("click",()=>this.close()),this.searchInput){this.searchInput.addEventListener("keypress",a=>{if(a.key==="Enter"){const s=this.searchInput.value.trim();s&&this.performSearch(s)}});const n=(t=this.searchInput.parentElement)==null?void 0:t.querySelector("svg");n==null||n.addEventListener("click",()=>{const a=this.searchInput.value.trim();a&&this.performSearch(a)})}this.modal.addEventListener("click",n=>{n.target===this.modal&&this.close()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&this.isOpen()&&this.close()})}async performSearch(e){if(!this.isSearching){this.isSearching=!0,this.currentSearchTerm=e,this.showLoading(),this.open();try{const n=await(await u(`search_items.php?q=${encodeURIComponent(e)}`)).json();n.success?this.displayResults(n):this.displayError(n.message||"Search failed")}catch(t){console.error("[Search] error",t),this.displayError("Error searching, please try again.")}finally{this.isSearching=!1}}}showLoading(){const e=document.getElementById("searchModalBody");e.innerHTML=`<div class="search-loading"><div class="spinner"></div><p>Searching for "${this.currentSearchTerm}"...</p></div>`}displayResults(e){this.currentResults=e.results||[];const t=document.getElementById("searchModalBody");if(!e.results.length){t.innerHTML=`<div class="search-no-results"><div class="search-no-results-icon">üîç</div><h3>No results found</h3><p>We couldn't find anything for "${e.search_term}"</p></div>`;return}let n=`<div class="search-results-header">Found <strong>${e.count}</strong> result${e.count!==1?"s":""} for "${e.search_term}"</div><div class="search-results-grid">`;e.results.forEach(a=>{const s=a.in_stock?"in-stock":"out-of-stock",r=a.in_stock?"":"disabled";n+=`<div class="search-result-item"><div class="search-result-clickable" data-sku="${a.sku}"><img src="${a.image_url}" alt="${a.name}" class="search-result-image" onerror="this.src='/images/items/placeholder.webp'"/><div class="search-result-content"><h3>${a.name}</h3><p class="${s}">${a.stock_status}</p><span>${a.formatted_price}</span></div></div><div class="search-result-actions"><button class="search-add-to-cart-btn" data-sku="${a.sku}" ${r}>${a.in_stock?"Add to Cart":"Out of Stock"}</button></div></div>`}),n+="</div>",t.innerHTML=n,t.querySelectorAll(".search-result-clickable").forEach(a=>a.addEventListener("click",()=>this.viewItemDetails(a.dataset.sku))),t.querySelectorAll(".search-add-to-cart-btn").forEach(a=>a.addEventListener("click",s=>this.addToCart(a.dataset.sku,s)))}displayError(e){const t=document.getElementById("searchModalBody");t.innerHTML=`<div class="search-error"><p>${e}</p></div>`}addToCart(e,t){t.stopPropagation();const n=this.currentResults.find(a=>a.sku===e);n&&v.add({sku:n.sku,name:n.name,price:parseFloat(n.price),image:n.image_url},1)}viewItemDetails(e){var n;this.close(),new URLSearchParams(window.location.search).get("page")==="shop"&&typeof window.showItemDetails=="function"?window.showItemDetails(e):(n=window.showGlobalItemModal)==null||n.call(window,e)}open(){this.modal.classList.remove("hidden"),document.body.classList.add("modal-open")}close(){this.modal.classList.add("hidden"),document.body.classList.remove("modal-open")}isOpen(){return!this.modal.classList.contains("hidden")}}document.getElementById("headerSearchInput")&&(window.searchModal=new O),window.SearchModal=O,window.handleImageError=M,window.handleImageErrorSimple=L,window.setupImageErrorHandling=F,window.ApiClient=m,window.apiGet=u,window.apiPost=S,window.apiPut=k,window.apiDelete=C,window.DOMUtils=d,window.loadDynamicBackground=w,console.log("[WF] ES-module bootstrap loaded")})();
