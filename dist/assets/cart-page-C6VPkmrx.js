console.log("[Page] cart-page.js loaded");function d(t){document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",t,{once:!0})}d(()=>{const t=async()=>{const r=window.cart&&typeof window.cart.renderCart=="function"?window.cart:window.WF_Cart&&typeof window.WF_Cart.renderCart=="function"?window.WF_Cart:null;if(!r){setTimeout(t,100);return}try{await r.renderCart()}catch(e){console.error("[CartPage] Error rendering cart initially",e)}window.addEventListener("cartUpdated",async()=>{try{await r.renderCart()}catch(e){console.error("[CartPage] Error re-rendering cart on update",e)}});const n=document.getElementById("cartPage"),a=n?.querySelector("div");n&&(n.addEventListener("click",e=>{e.target===n&&(window.location.href="/?page=room_main")}),a&&a.addEventListener("click",e=>e.stopPropagation())),document.addEventListener("keydown",e=>{if(e.key==="Escape"||e.keyCode===27){const o=document.getElementById("cartPage");o&&!o.classList.contains("hidden")&&(window.location.href="/?page=room_main")}})};t()});
