<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Pure Inline CSS Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 3px solid #16a34a;
            border-radius: 8px;
            background: #f0fdf4;
        }
        
        .test-section h3 {
            color: #16a34a;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .status.success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        
        .status.error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }
        
        .status.warning {
            background: #fefcbf;
            color: #744210;
            border: 1px solid #f6e05e;
        }
        
        .status.info {
            background: #bee3f8;
            color: #2a4365;
            border: 1px solid #90cdf4;
        }
        
        .test-button {
            background: #16a34a;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.2s ease;
        }
        
        .test-button:hover {
            background: #15803d;
            transform: translateY(-1px);
        }
        
        .iframe-container {
            border: 3px solid #16a34a;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
            height: 500px;
        }
        
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 10px;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .fix-checklist {
            background: #f0fdf4;
            border: 2px solid #16a34a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .fix-item {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 12px;
            border-radius: 6px;
            background: white;
            border-left: 4px solid #e2e8f0;
        }
        
        .fix-item.fixed {
            background: #c6f6d5;
            border-left-color: #16a34a;
        }
        
        .fix-item.broken {
            background: #fed7d7;
            border-left-color: #742a2a;
        }
        
        .fix-icon {
            margin-right: 15px;
            font-size: 20px;
        }
        
        .fix-text {
            flex: 1;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Pure Inline CSS Test</h1>
        <p style="text-align: center; color: #718096; margin-bottom: 30px;">
            <strong>Testing pure inline CSS solution - no external CSS or JavaScript</strong>
        </p>

        <div class="fix-checklist">
            <h3>üéØ Pure Inline CSS Status</h3>
            <div class="fix-item" id="fix-1">
                <span class="fix-icon">‚ùì</span>
                <span class="fix-text">1. Background Image Tiling (Pure Inline CSS)</span>
            </div>
            <div class="fix-item" id="fix-2">
                <span class="fix-icon">‚ùì</span>
                <span class="fix-text">2. Full Viewport Width (Pure Inline CSS)</span>
            </div>
            <div class="fix-item" id="fix-3">
                <span class="fix-icon">‚ùì</span>
                <span class="fix-text">3. Custom Scrollbar (Pure Inline CSS)</span>
            </div>
        </div>

        <div class="test-section">
            <h3>üéØ Pure Inline CSS Test</h3>
            <p>Testing the pure inline CSS solution applied directly to HTML elements.</p>
            <button class="test-button" onclick="testPureInlineCSS()">Test Pure Inline CSS</button>
            <div id="pure-results"></div>
            <div id="shop-iframe-container"></div>
        </div>

        <div class="test-section">
            <h3>üìä Inline CSS Analysis</h3>
            <div id="inline-analysis">
                <div class="status info">Click the test button above to see inline CSS analysis.</div>
            </div>
        </div>
    </div>

    <script>
        let pureResults = {
            backgroundTiling: null,
            fullWidth: null,
            customScrollbar: null
        };

        async function testPureInlineCSS() {
            const resultsDiv = document.getElementById('pure-results');
            const iframeContainer = document.getElementById('shop-iframe-container');
            const analysisDiv = document.getElementById('inline-analysis');
            
            resultsDiv.innerHTML = '<div class="status warning">Testing pure inline CSS solution...</div>';
            
            try {
                // Create iframe to load shop page with pure inline CSS
                const iframe = document.createElement('iframe');
                iframe.src = `/?page=shop&pure_inline=1&v=${Date.now()}`;
                
                iframeContainer.innerHTML = '<div class="iframe-container"></div>';
                iframeContainer.querySelector('.iframe-container').appendChild(iframe);
                
                iframe.onload = function() {
                    setTimeout(() => {
                        try {
                            const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                            const iframeWindow = iframe.contentWindow;
                            
                            let inlineReport = '<h4>üéØ Pure Inline CSS Analysis</h4>';
                            inlineReport += '<div class="code-block">';
                            
                            // Check DOM structure and inline styles
                            const mainContent = iframeDoc.querySelector('main#mainContent');
                            const shopPage = iframeDoc.querySelector('#shopPage');
                            const body = iframeDoc.body;
                            
                            inlineReport += `DOM STRUCTURE CHECK:\n`;
                            inlineReport += `main#mainContent: ${mainContent ? 'FOUND ‚úÖ' : 'NOT FOUND ‚ùå'}\n`;
                            inlineReport += `#shopPage: ${shopPage ? 'FOUND ‚úÖ' : 'NOT FOUND ‚ùå'}\n`;
                            inlineReport += `body.shop-page: ${body.classList.contains('shop-page') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n\n`;
                            
                            // Check inline styles on main element
                            if (mainContent) {
                                const mainInlineStyle = mainContent.getAttribute('style') || '';
                                inlineReport += `MAIN#MAINCONTENT INLINE STYLES:\n`;
                                inlineReport += `Inline Style Length: ${mainInlineStyle.length} characters\n`;
                                inlineReport += `Has background-size: ${mainInlineStyle.includes('background-size') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                inlineReport += `Has background-repeat: ${mainInlineStyle.includes('background-repeat') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                inlineReport += `Has padding: ${mainInlineStyle.includes('padding') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                
                                const mainStyles = iframeWindow.getComputedStyle(mainContent);
                                inlineReport += `Computed background-size: ${mainStyles.backgroundSize}\n`;
                                inlineReport += `Computed background-repeat: ${mainStyles.backgroundRepeat}\n`;
                                inlineReport += `Computed background-position: ${mainStyles.backgroundPosition}\n`;
                                inlineReport += `Computed padding: ${mainStyles.padding}\n\n`;
                                
                                pureResults.backgroundTiling = (mainStyles.backgroundSize === 'cover' && mainStyles.backgroundRepeat === 'no-repeat');
                            }
                            
                            // Check inline styles on shop page element
                            if (shopPage) {
                                const shopInlineStyle = shopPage.getAttribute('style') || '';
                                inlineReport += `#SHOPPAGE INLINE STYLES:\n`;
                                inlineReport += `Inline Style Length: ${shopInlineStyle.length} characters\n`;
                                inlineReport += `Has position: ${shopInlineStyle.includes('position') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                inlineReport += `Has left: ${shopInlineStyle.includes('left') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                inlineReport += `Has width: ${shopInlineStyle.includes('width') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                inlineReport += `Has margin-left: ${shopInlineStyle.includes('margin-left') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                                
                                const shopStyles = iframeWindow.getComputedStyle(shopPage);
                                inlineReport += `Computed position: ${shopStyles.position}\n`;
                                inlineReport += `Computed left: ${shopStyles.left}\n`;
                                inlineReport += `Computed width: ${shopStyles.width}\n`;
                                inlineReport += `Computed margin-left: ${shopStyles.marginLeft}\n\n`;
                                
                                const viewportWidth = iframeWindow.innerWidth;
                                const isFullWidth = parseInt(shopStyles.width) >= viewportWidth * 0.95;
                                const hasBreakout = shopStyles.position === 'relative' && shopStyles.left.includes('%');
                                pureResults.fullWidth = isFullWidth && hasBreakout;
                            }
                            
                            // Check body inline styles and scrollbar
                            const bodyInlineStyle = body.getAttribute('style') || '';
                            inlineReport += `BODY INLINE STYLES:\n`;
                            inlineReport += `Inline Style Length: ${bodyInlineStyle.length} characters\n`;
                            inlineReport += `Has scrollbar-width: ${bodyInlineStyle.includes('scrollbar-width') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                            inlineReport += `Has scrollbar-color: ${bodyInlineStyle.includes('scrollbar-color') ? 'YES ‚úÖ' : 'NO ‚ùå'}\n`;
                            
                            const bodyStyles = iframeWindow.getComputedStyle(body);
                            inlineReport += `Computed scrollbar-width: ${bodyStyles.getPropertyValue('scrollbar-width')}\n`;
                            inlineReport += `Computed scrollbar-color: ${bodyStyles.getPropertyValue('scrollbar-color')}\n\n`;
                            
                            const hasCustomScrollbar = (bodyStyles.getPropertyValue('scrollbar-width') === 'thin' || 
                                                     bodyStyles.getPropertyValue('scrollbar-color').includes('#87ac3a'));
                            pureResults.customScrollbar = hasCustomScrollbar;
                            
                            inlineReport += `PURE INLINE CSS STATUS:\n`;
                            inlineReport += `Background Fix: ${pureResults.backgroundTiling ? 'WORKING ‚úÖ' : 'BROKEN ‚ùå'}\n`;
                            inlineReport += `Full Width Fix: ${pureResults.fullWidth ? 'WORKING ‚úÖ' : 'BROKEN ‚ùå'}\n`;
                            inlineReport += `Scrollbar Fix: ${pureResults.customScrollbar ? 'WORKING ‚úÖ' : 'BROKEN ‚ùå'}\n`;
                            
                            inlineReport += '</div>';
                            
                            // Update UI
                            updateFixChecklist();
                            analysisDiv.innerHTML = inlineReport;
                            
                            // Overall status
                            const fixedIssues = Object.values(pureResults).filter(result => result === true).length;
                            const totalIssues = Object.keys(pureResults).length;
                            
                            let status = '';
                            if (fixedIssues === totalIssues) {
                                status = '<div class="status success">üéâ ALL ISSUES RESOLVED WITH PURE INLINE CSS!</div>';
                            } else if (fixedIssues >= 2) {
                                status = '<div class="status warning">‚ö†Ô∏è Most issues resolved with pure inline CSS</div>';
                            } else {
                                status = '<div class="status error">‚ùå Pure inline CSS solution needs refinement</div>';
                            }
                            
                            status += `<div class="status info">Fixed: ${fixedIssues}/${totalIssues} issues with pure inline CSS</div>`;
                            resultsDiv.innerHTML = status;
                            
                        } catch (error) {
                            resultsDiv.innerHTML = `<div class="status error">‚ùå Error testing pure inline CSS: ${error.message}</div>`;
                        }
                    }, 2000);
                };
                
                iframe.onerror = function() {
                    resultsDiv.innerHTML = '<div class="status error">‚ùå Failed to load shop page for pure inline CSS test</div>';
                };
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
            }
        }

        function updateFixChecklist() {
            const fixes = [
                { id: 'fix-1', result: pureResults.backgroundTiling },
                { id: 'fix-2', result: pureResults.fullWidth },
                { id: 'fix-3', result: pureResults.customScrollbar }
            ];
            
            fixes.forEach(fix => {
                const element = document.getElementById(fix.id);
                const icon = element.querySelector('.fix-icon');
                
                if (fix.result === true) {
                    element.className = 'fix-item fixed';
                    icon.textContent = '‚úÖ';
                } else if (fix.result === false) {
                    element.className = 'fix-item broken';
                    icon.textContent = '‚ùå';
                } else {
                    element.className = 'fix-item';
                    icon.textContent = '‚ùì';
                }
            });
        }

        // Auto-run pure inline CSS test on page load
        window.addEventListener('load', function() {
            setTimeout(testPureInlineCSS, 500);
        });
    </script>
</body>
</html>
