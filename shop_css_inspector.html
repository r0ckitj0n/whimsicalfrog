<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Shop CSS Inspector</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .inspector-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2d3748;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .inspector-banner {
            background: linear-gradient(135deg, #6f42c1, #e83e8c);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .test-button {
            display: inline-block;
            background: #6f42c1;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            margin: 10px 5px;
            transition: background 0.3s ease;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
        }
        
        .test-button:hover {
            background: #5a32a3;
        }
        
        .results-section {
            margin: 30px 0;
            padding: 25px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #6f42c1;
        }
        
        .result-item {
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }
        
        .result-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .result-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .result-info {
            background: #cce7ff;
            color: #004085;
            border: 1px solid #99d3ff;
        }
        
        #inspectionResults {
            min-height: 200px;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="inspector-container">
        <h1>üîç Shop CSS Inspector</h1>
        
        <div class="inspector-banner">
            üïµÔ∏è Real-time CSS Property Inspector for Shop Page
        </div>

        <div class="instructions">
            <h3>Instructions:</h3>
            <ol>
                <li>Open the shop page in another tab: <a href="http://localhost:8080/?page=shop" target="_blank">Shop Page</a></li>
                <li>Come back to this tab</li>
                <li>Click "Inspect Shop CSS" to analyze the current styles</li>
                <li>Review the results to identify any issues</li>
            </ol>
        </div>

        <button class="test-button" onclick="inspectShopCSS()">üîç Inspect Shop CSS</button>
        <button class="test-button" onclick="clearResults()">üóëÔ∏è Clear Results</button>

        <div class="results-section">
            <h3>Inspection Results:</h3>
            <div id="inspectionResults">
                <div class="result-info">Click "Inspect Shop CSS" to analyze the current styles...</div>
            </div>
        </div>
    </div>

    <script>
        function clearResults() {
            document.getElementById('inspectionResults').innerHTML = '<div class="result-info">Results cleared. Click "Inspect Shop CSS" to run analysis...</div>';
        }

        async function inspectShopCSS() {
            const resultsDiv = document.getElementById('inspectionResults');
            resultsDiv.innerHTML = '<div class="result-info">Inspecting shop page CSS...</div>';
            
            try {
                // Open shop page in a hidden iframe to inspect its CSS
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                iframe.src = 'http://localhost:8080/?page=shop';
                document.body.appendChild(iframe);
                
                iframe.onload = function() {
                    try {
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        const productsGrid = iframeDoc.getElementById('productsGrid');
                        const productCards = iframeDoc.querySelectorAll('.product-card');
                        
                        let results = [];
                        
                        if (productsGrid) {
                            const gridStyles = window.getComputedStyle ? 
                                iframe.contentWindow.getComputedStyle(productsGrid) : 
                                productsGrid.currentStyle;
                            
                            // Check key CSS properties
                            const display = gridStyles.display;
                            const justifyContent = gridStyles.justifyContent;
                            const flexWrap = gridStyles.flexWrap;
                            const gridTemplateColumns = gridStyles.gridTemplateColumns;
                            const width = gridStyles.width;
                            const gap = gridStyles.gap;
                            
                            // Display property check
                            if (display === 'flex') {
                                results.push({
                                    type: 'success',
                                    message: `‚úÖ Display: ${display} (Flexbox active)`
                                });
                            } else {
                                results.push({
                                    type: 'error',
                                    message: `‚ùå Display: ${display} (Should be flex)`
                                });
                            }
                            
                            // Justify content check
                            if (justifyContent === 'center') {
                                results.push({
                                    type: 'success',
                                    message: `‚úÖ Justify Content: ${justifyContent} (Centering active)`
                                });
                            } else {
                                results.push({
                                    type: 'error',
                                    message: `‚ùå Justify Content: ${justifyContent} (Should be center)`
                                });
                            }
                            
                            // Flex wrap check
                            if (flexWrap === 'wrap') {
                                results.push({
                                    type: 'success',
                                    message: `‚úÖ Flex Wrap: ${flexWrap} (Wrapping enabled)`
                                });
                            } else {
                                results.push({
                                    type: 'error',
                                    message: `‚ùå Flex Wrap: ${flexWrap} (Should be wrap)`
                                });
                            }
                            
                            // Grid template columns check (should be none for flexbox)
                            if (gridTemplateColumns === 'none' || !gridTemplateColumns) {
                                results.push({
                                    type: 'success',
                                    message: `‚úÖ Grid Template Columns: ${gridTemplateColumns || 'none'} (Grid disabled)`
                                });
                            } else {
                                results.push({
                                    type: 'error',
                                    message: `‚ùå Grid Template Columns: ${gridTemplateColumns} (Grid still active)`
                                });
                            }
                            
                            // Container width
                            results.push({
                                type: 'info',
                                message: `‚ÑπÔ∏è Container Width: ${width}`
                            });
                            
                            // Gap spacing
                            results.push({
                                type: 'info',
                                message: `‚ÑπÔ∏è Gap: ${gap}`
                            });
                            
                            // Check product cards
                            if (productCards.length > 0) {
                                const firstCard = productCards[0];
                                const cardStyles = iframe.contentWindow.getComputedStyle(firstCard);
                                const cardWidth = cardStyles.width;
                                const cardFlex = cardStyles.flex;
                                
                                results.push({
                                    type: 'info',
                                    message: `‚ÑπÔ∏è Card Count: ${productCards.length} cards found`
                                });
                                
                                results.push({
                                    type: 'info',
                                    message: `‚ÑπÔ∏è Card Width: ${cardWidth}`
                                });
                                
                                results.push({
                                    type: 'info',
                                    message: `‚ÑπÔ∏è Card Flex: ${cardFlex}`
                                });
                                
                                // Calculate how many cards should fit
                                const containerWidth = parseInt(width);
                                const cardWidthNum = parseInt(cardWidth);
                                const gapNum = parseInt(gap) || 20;
                                
                                if (containerWidth && cardWidthNum) {
                                    const cardsPerRow = Math.floor((containerWidth + gapNum) / (cardWidthNum + gapNum));
                                    results.push({
                                        type: 'info',
                                        message: `‚ÑπÔ∏è Calculated Cards Per Row: ${cardsPerRow} (based on container: ${containerWidth}px, card: ${cardWidthNum}px, gap: ${gapNum}px)`
                                    });
                                    
                                    if (cardsPerRow >= 5) {
                                        results.push({
                                            type: 'success',
                                            message: `‚úÖ Cards Per Row: ${cardsPerRow} (Meets 5-6 requirement)`
                                        });
                                    } else {
                                        results.push({
                                            type: 'error',
                                            message: `‚ùå Cards Per Row: ${cardsPerRow} (Should be 5-6 on large screens)`
                                        });
                                    }
                                }
                            } else {
                                results.push({
                                    type: 'error',
                                    message: '‚ùå No product cards found'
                                });
                            }
                            
                        } else {
                            results.push({
                                type: 'error',
                                message: '‚ùå productsGrid element not found'
                            });
                        }
                        
                        // Display results
                        displayResults(results);
                        
                        // Clean up
                        document.body.removeChild(iframe);
                        
                    } catch (error) {
                        resultsDiv.innerHTML = `<div class="result-error">‚ùå Error inspecting CSS: ${error.message}</div>`;
                        document.body.removeChild(iframe);
                    }
                };
                
                iframe.onerror = function() {
                    resultsDiv.innerHTML = '<div class="result-error">‚ùå Failed to load shop page for inspection</div>';
                    document.body.removeChild(iframe);
                };
                
            } catch (error) {
                resultsDiv.innerHTML = `<div class="result-error">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        function displayResults(results) {
            const resultsDiv = document.getElementById('inspectionResults');
            let html = '';
            
            results.forEach(result => {
                const className = `result-${result.type}`;
                html += `<div class="${className}">${result.message}</div>`;
            });
            
            resultsDiv.innerHTML = html;
        }
    </script>
</body>
</html>
