/* ==============================================
   DETAILED ITEM MODAL – VISIBILITY & LAYOUT FIXES
   Keeps modal centred, prevents full-viewport stretch,
   and removes accidental transforms on buttons
   ============================================== */

/* Ensure overlay stays flex-centred even if later CSS alters display */
.detailed-item-modal.show {
    /* position the overlay below the universal header using a dynamic CSS var */
    top: var(--wf-header-offset, 0) !important;
    bottom: auto !important; /* override Tailwind's inset-0 bottom */
    height: calc(100vh - var(--wf-header-offset, 0)) !important;
    height: calc(100dvh - var(--wf-header-offset, 0)) !important;
    padding-top: 0 !important;
    display: flex !important;
    align-items: flex-start !important;
    justify-content: center !important;
}

.detailed-item-modal .modal-footer {
    padding-bottom: env(safe-area-inset-bottom);
}

/* ==============================================
   PRICE STYLING – larger and brand secondary color
   ============================================== */
.detailed-item-modal #detailedPriceSection #detailedCurrentPrice {
    /* approximately 2x the previous text-xl (1.25rem -> 2.5rem) */
    font-size: 2.5rem !important;
    line-height: 1.1 !important;
    color: var(--brand-secondary) !important; /* burnt orange */
}

/* Utility text color classes scoped to modal */
.detailed-item-modal .text-brand-primary { color: var(--brand-primary) !important; }
.detailed-item-modal .text-brand-secondary { color: var(--brand-secondary) !important; }

/* Prevent container from stretching to entire viewport width */

/* Remove any transforms or oversized layout on buttons rendered inside the modal */
/* maintain original button transform; only adjust sizing */
.detailed-item-modal .room-modal-button {
    width: auto !important;
    max-width: max-content !important;
    transform: none !important;
}

/* Fix Add to Cart button width */
.detailed-item-modal .wf-add-to-cart-btn {
    width: auto !important;
    max-width: none !important;
    box-sizing: border-box !important;
    white-space: nowrap !important;
}
.detailed-item-modal .btn--detailed-add-to-cart {
    width: auto !important;
    max-width: none !important;
    box-sizing: border-box !important;
    white-space: nowrap !important;
}
/* When in the qty+cart inline row, allow button to fill remaining space */
.detailed-item-modal .detailed-qty-and-cart-row .wf-add-to-cart-btn,
.detailed-item-modal .detailed-qty-and-cart-row .btn--detailed-add-to-cart {
    width: 100% !important;
    white-space: nowrap !important;
}
/* Hover color for Add to Cart inside modal */
.detailed-item-modal .wf-add-to-cart-btn:hover,
.detailed-item-modal .btn--detailed-add-to-cart:hover {
    background-color: var(--brand-secondary) !important;
    border-color: var(--brand-secondary) !important;
    color: #fff !important;
}

/* Fix Additional Details button width */
.detailed-item-modal #additionalInfoToggle {
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    padding-bottom: env(safe-area-inset-bottom);
}

/* Ensure modal content doesn't overflow */
.detailed-item-modal .modal-content {
    overflow-x: hidden !important;
    overflow-y: auto !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    padding-left: 1.5rem !important;
    padding-right: 1.5rem !important;
}

/* Prevent child elements from overflowing - but not override container width */
.detailed-item-modal .modal-content * {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* Fix quantity selector to be more compact */
.detailed-item-modal .quantity-selector {
    display: inline-flex !important;
    align-items: center !important;
    gap: 2px !important;
    max-width: 180px !important;
    width: auto !important;
    flex-wrap: nowrap !important;
}

/* FINAL NUCLEAR FIX: Absolutely minimal quantity buttons */
.detailed-item-modal .btn--qty {
    /* Absolutely minimal sizing */
    width: 24px !important;    /* 14px -> 24px (~+71%) */
    min-width: 24px !important;
    max-width: 24px !important;
    height: 24px !important;
    
    /* Remove ALL padding and margin */
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    
    /* Override Tailwind utility classes */
    --tw-space-x-reverse: 0 !important;
    --tw-space-y-reverse: 0 !important;
    
    /* Layout and appearance */
    border: 1px solid #ccc !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 17px !important; /* 10px -> 17px */
    line-height: 1 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    text-align: center !important;
    vertical-align: middle !important;
}
.detailed-item-modal .quantity-selector .btn--qty {
    /* Absolutely minimal sizing */
    width: 24px !important;
    min-width: 24px !important;
    max-width: 24px !important;
    height: 24px !important;
    
    /* Remove ALL padding and margin */
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    
    /* Override Tailwind utility classes */
    --tw-space-x-reverse: 0 !important;
    --tw-space-y-reverse: 0 !important;
    
    /* Layout and appearance */
    border: 1px solid #ccc !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 17px !important;
    line-height: 1 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    text-align: center !important;
    vertical-align: middle !important;
}
.detailed-item-modal .flex .btn--qty {
    /* Absolutely minimal sizing */
    width: 24px !important;
    min-width: 24px !important;
    max-width: 24px !important;
    height: 24px !important;
    
    /* Remove ALL padding and margin */
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    
    /* Override Tailwind utility classes */
    --tw-space-x-reverse: 0 !important;
    --tw-space-y-reverse: 0 !important;
    
    /* Layout and appearance */
    border: 1px solid #ccc !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 17px !important;
    line-height: 1 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    text-align: center !important;
    vertical-align: middle !important;
}
.detailed-item-modal-container .btn--qty {
    /* Absolutely minimal sizing */
    width: 24px !important;
    min-width: 24px !important;
    max-width: 24px !important;
    height: 24px !important;
    
    /* Remove ALL padding and margin */
    padding: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin: 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    
    /* Override Tailwind utility classes */
    --tw-space-x-reverse: 0 !important;
    --tw-space-y-reverse: 0 !important;
    
    /* Layout and appearance */
    border: 1px solid #ccc !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    flex-shrink: 0 !important;
    flex-grow: 0 !important;
    font-size: 17px !important;
    line-height: 1 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    text-align: center !important;
    vertical-align: middle !important;
}

/* Target SVG icons inside buttons to make them smaller */
.detailed-item-modal .btn--qty svg {
    width: 14px !important;  /* 8px -> 14px */
    height: 14px !important;
    flex-shrink: 0 !important;
}
.detailed-item-modal .quantity-selector .btn--qty svg {
    width: 14px !important;
    height: 14px !important;
    flex-shrink: 0 !important;
}

/* Ensure the main image renders as a block element and constrain height */
.detailed-item-modal #detailedMainImage {
    display: block !important;
    height: auto !important;
    width: 75% !important;
    margin: 0 auto !important;
    object-fit: contain !important;
    cursor: zoom-in !important;
    /* About 50px less than the current available modal viewport */
    max-height: calc(95vh - var(--wf-header-offset, 0) - 50px) !important;
    max-height: calc(95dvh - var(--wf-header-offset, 0) - 50px) !important;
}

/* Override the aspect-square wrapper for the main image so it shrinks with the image */
.detailed-item-modal .aspect-square {
    aspect-ratio: auto !important;
    max-height: calc(95vh - var(--wf-header-offset, 0) - 50px) !important;
    max-height: calc(95dvh - var(--wf-header-offset, 0) - 50px) !important;
}

/* Overlay must span the full viewport so background clicks reach it */
.detailed-item-modal {
    /* Let Tailwind's fixed inset-0 provide full-viewport hit area */
    width: 100vw !important;
    max-width: 100vw !important;
    width: 100dvw !important;
    max-width: 100dvw !important;
    height: auto; /* actual height is controlled by .show rules above */
    margin: 0 !important;
    /* Provide a subtle backdrop so users can see the clickable overlay */
    background: rgba(0, 0, 0, 0.35);
    /* Must be above hover popup and room overlay */
    z-index: var(--z-detailed-item-modal, 100300) !important;
    overscroll-behavior: contain;
}

/* Constrain only the inner modal container, not the overlay */
.detailed-item-modal .detailed-item-modal-container {
    max-width: min(90vw, 1400px) !important;
    max-width: min(90dvw, 1400px) !important;
    width: min(90vw, 1400px) !important;
    width: min(90dvw, 1400px) !important;
    margin: 0 auto !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    box-sizing: border-box !important;
}

/* Hide horizontal scrollbar but keep vertical */
.detailed-item-modal-container::-webkit-scrollbar-x {
    display: none !important;
}
.detailed-item-modal::-webkit-scrollbar-x {
    display: none !important;
}

/* Force modal body to clip overflow */
.detailed-item-modal-container .modal-body {
    overflow-x: hidden !important;
    overflow-y: visible !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Make quantity input field narrower - target semantic class */
.detailed-item-modal .input--qty {
    width: 52px !important;      /* 30px -> 52px */
    min-width: 52px !important;
    max-width: 52px !important;
    text-align: center !important;
    padding: 1px !important; /* base */
    padding-top: 6px !important;   /* increase vertical padding */
    padding-bottom: 6px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    font-size: 1.3125rem !important;  /* match 1.5x text size */
    line-height: 1.2 !important;
    min-height: 2.25rem !important;   /* ~36px, avoids clipping */
}
.detailed-item-modal .quantity-selector input.input--qty {
    width: 52px !important;
    min-width: 52px !important;
    max-width: 52px !important;
    text-align: center !important;
    padding: 1px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    font-size: 1.3125rem !important;
    line-height: 1.2 !important;
    min-height: 2.25rem !important;
}
.detailed-item-modal input.input--qty {
    width: 52px !important;
    min-width: 52px !important;
    max-width: 52px !important;
    text-align: center !important;
    padding: 1px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    font-size: 1.3125rem !important;
    line-height: 1.2 !important;
    min-height: 2.25rem !important;
}
.detailed-item-modal-container .input--qty {
    width: 52px !important;
    min-width: 52px !important;
    max-width: 52px !important;
    text-align: center !important;
    padding: 1px !important;
    padding-top: 6px !important;
    padding-bottom: 6px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
    font-size: 1.3125rem !important;
    line-height: 1.2 !important;
    min-height: 2.25rem !important;
}

/* Hide native number input spinners inside modal; keep external +/- buttons */
.detailed-item-modal input[type="number"]::-webkit-outer-spin-button,
.detailed-item-modal input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none !important;
    margin: 0 !important;
}
.detailed-item-modal input[type="number"] {
    -moz-appearance: textfield !important;
    appearance: textfield !important;
}

/* Ensure ONLY the quantity selector is constrained, not entire flex rows */
/* Removed over-broad :has(.btn--qty) rule that collapsed parent rows */

/* Explicit min width for Qty block to prevent collapse */
.detailed-item-modal .qty-block {
    min-width: 220px !important;
}

/* Ensure the combined row aligns as intended */
.detailed-item-modal .detailed-qty-and-cart-row {
    align-items: center !important; /* middle-align qty with Add to Cart */
    justify-content: flex-start !important; /* left-justify row */
}

/* Make the inline Add to Cart about 3x larger */
.detailed-item-modal .detailed-qty-and-cart-row .wf-add-to-cart-btn,
.detailed-item-modal .detailed-qty-and-cart-row .btn--detailed-add-to-cart {
    padding-top: 1.25rem !important;   /* ~py-5 */
    padding-bottom: 1.25rem !important;
    font-size: 1.25rem !important;     /* ~text-xl */
}

/* Brand primary button semantics for detailed item modal */
.detailed-item-modal .wf-add-to-cart-btn,
.detailed-item-modal .btn--detailed-add-to-cart,
.detailed-item-modal .room-modal-button {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.5rem !important;
    padding: 10px 16px !important;
    border-radius: 10px !important;
    border: 1px solid transparent !important;
    font-weight: 700 !important;
    text-decoration: none !important;
    cursor: pointer !important;
    background-color: var(--brand-primary, #87ac3a) !important;
    color: #ffffff !important;
    transition: background-color 0.2s ease, border-color 0.2s ease, filter 0.2s ease, opacity 0.2s ease !important;
}
.detailed-item-modal .wf-add-to-cart-btn:hover,
.detailed-item-modal .btn--detailed-add-to-cart:hover,
.detailed-item-modal .room-modal-button:hover {
    background-color: var(--brand-secondary, #BF5700) !important;
    border-color: var(--brand-secondary, #BF5700) !important;
    color: #ffffff !important;
}
.detailed-item-modal .wf-add-to-cart-btn:focus-visible,
.detailed-item-modal .btn--detailed-add-to-cart:focus-visible,
.detailed-item-modal .room-modal-button:focus-visible {
    outline: 3px solid color-mix(in srgb, var(--brand-secondary, #BF5700) 70%, white 30%) !important;
    outline-offset: 2px !important;
}

/* ==============================================
   IMAGE VIEWER OVERLAY (click-to-enlarge)
   ============================================== */
.image-viewer-overlay {
    position: fixed !important;
    inset: 0 !important;
    background: rgba(0, 0, 0, 0.85) !important;
    z-index: var(--z-image-viewer, 100400) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: zoom-out !important;
}

.image-viewer-overlay img {
    max-width: 95vw !important;
    max-width: 95dvw !important;
    max-height: calc(100vh - var(--wf-header-offset, 0) - 20px) !important;
    max-height: calc(100dvh - var(--wf-header-offset, 0) - 20px) !important;
    width: auto !important;
    height: auto !important;
    object-fit: contain !important;
    display: block !important;
    background: transparent !important;
}

/* 50% larger for stock text and qty label */
.detailed-item-modal .stock-status-text,
.detailed-item-modal .qty-label {
    font-size: 1.3125rem !important; /* 0.875rem * 1.5 */
}

/* ==============================================
   SELLING POINTS – pill style using brand colors
   Source of truth for styling (Vite-managed)
   ============================================== */
.detailed-item-modal .selling-point-pill {
    display: inline-flex;
    align-items: center;
    background-color: var(--button-bg-primary, #87ac3a);
    color: var(--brand-bg-text-color, #fff);
    padding: 2px 8px;           /* minimal vertical height */
    border-radius: 8px;         /* subtle pill */
    line-height: 1.2;           /* tight line height */
    max-width: 100%;
}

.detailed-item-modal .selling-point-icon {
    width: 14px;
    height: 14px;
    color: var(--brand-bg-text-color, #fff);
    flex-shrink: 0;
}

.detailed-item-modal .selling-point-text {
    color: var(--brand-bg-text-color, #fff);
    font-size: 1rem;    /* larger than default */
    font-weight: 600;
    line-height: 1.2;
    margin: 0;          /* remove default paragraph margins */
    white-space: normal; /* wrap as needed */
}

/* ==============================================
   VARIANT SELECTS – enlarge for visibility
   ============================================== */
.detailed-item-modal .detailed-select {
    font-size: 1.125rem !important;   /* ~text-lg */
    line-height: 1.4 !important;
    padding: 0.625rem 0.875rem !important; /* increase tap target */
    min-height: 2.75rem !important;   /* ensure adequate height */
    border: 2px solid #d1d5db !important; /* slightly thicker border */
    border-radius: 0.5rem !important; /* rounded */
    background-color: #fff !important;
    color: #111827 !important;        /* gray-900 */
    box-shadow: 0 1px 2px rgba(0,0,0,0.04) !important;
}
.detailed-item-modal .detailed-select:focus {
    outline: none !important;
    border-color: var(--brand-secondary, #b45309) !important;
    box-shadow: 0 0 0 3px rgba(180, 83, 9, 0.2) !important; /* brand-secondary focus ring */
}
.detailed-item-modal .detailed-select option {
    font-size: 1.0625rem !important;  /* slightly smaller than control */
}
.detailed-item-modal .detailed-select option.option-out-of-stock,
.detailed-item-modal .detailed-select option:disabled {
    color: #9ca3af !important; /* gray-400 */
}
